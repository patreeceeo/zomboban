<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <base href="/game">
    <title>Game Demo</title>
    <script type="text/javascript">
      window.ServiceWorkerRegistration ||= {};
      window.onerror = function() {
        errorMessageElement.showModal();
      }
    </script>
    <script type="module" src="/src/client.ts"></script>
    <link rel="stylesheet" href="/src/style.css" />
  </head>
  <body>
    <noscript><h1>Sorry, but JavaScript must be <a href="https://www.wikihow.com/Enable-JavaScript">enabled</a> to play.</h1></noscript>
    <dialog id="errorMessageElement">
      <h1>Sorry / ごめんなさい</h1>
      <p>Looks like you found a pretty serious bug. Please <a href="https://github.com/patreeceeo/zomboban/issues/">file and issue</a> and I will work on it.</p>
      <p>In the meantime, though I want to support all browsers/systems/people (that's the promise of the web, after all) try using Google Chrome / <a href="https://www.chromium.org/Home/">Chromium</a>. If you're not already.</p>
    </dialog>
    <main>
      <my-toolbar is-signed-in="isSignedIn" is-paused="isPaused" is-undoing="isUndoing"></my-toolbar>
      <div class="canvasShrinkwrap">
        <canvas id="canvas"></canvas>
        <div id="uiRootElement" class="absolute top z-index:2 width:100% height:100%">
        </div>
        <my-vars-form z-show="devToolsVarsFormEnabled"></my-vars-form>
        <div id="winMessageElement" class="absolute width:100% height:100% display:none f-col justify-content:center align-items:center z-index:1 ponter-events:none">
          <h1 class="text-align:center">You sly devil, you!</h1>
          <h2 class="text-align:center">Press Shift+R to restart</h1>
        </div>
        <div z-show="isUndoing" class="absolute top width:100% height:100% f-col justify-content:center align-items:center z-index:1 ponter-events:none">
          <h1>Undoing&hellip;</h1>
          <progress max="$completedActionCountBeforeUndo" value="$completedActionCount"/>
        </div>
        <h1 z-hide-until-init class="absolute width:100% z-index:1 ponter-events:none text-align:center" style="top: calc(50% - 4em)">
          $currentInputFeedback
        </h1>
      </div>
    </main>

    <div class="fixed top z-index:3 width:100%" id="flashesElement"></div>
    <dialog id="requestIndicatorElement" class="text-align:center">
      <img style="height:12em" src="/assets/images/rotating-cube.gif"/>
      <h1><span class="message">booting up</span>&hellip;</h1>
    </dialog>
    <script type="text/JavaScript">
      requestIndicatorElement.showModal()
    </script>
    <my-sign-in-form></my-sign-in-form>
  </body>
</html>
